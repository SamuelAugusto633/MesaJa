<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MesaJa - Gerar Relatórios</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <header class="global-header">
        <div class="social-links">
            <a href="#" title="Youtube"><img src="/static/icones/youtube.png" alt="YouTube"></a>
            <a href="#" title="Facebook"><img src="/static/icones/facebook.png" alt="Facebook"></a>
            <a href="#" title="Twitter"><img src="/static/icones/twitter.png" alt="Twitter"></a>
            <a href="#" title="Instagram"><img src="/static/icones/instagram.png" alt="Instagram"></a>
        </div>
        <nav class="nav-links">
            <a href="#">Recursos</a> <a href="#">Testes</a> <a href="#">Promoções</a> <a href="#">Tutorial</a> <a href="#">Fale Conosco</a>
        </nav>
    </header>

    <main class="relatorios-container">
        <h1>Gerar Relatórios</h1>
        <p>Selecione uma das opções abaixo para gerar e fazer o download de um relatório em formato PDF.</p>

        <div class="relatorios-grid">
            <a href="/relatorios/diario" class="report-card" target="_blank">
                <h3>Relatório Diário</h3>
                <p>Gera um resumo das atividades do dia de hoje.</p>
            </a>

            <a href="/relatorios/semanal" class="report-card" target="_blank">
                <h3>Relatório Semanal</h3>
                <p>Gera um resumo consolidado das atividades dos últimos 7 dias.</p>
            </a>

            <div class="report-card">
                <h3>Relatório Personalizado</h3>
                <form id="form-personalizado">
                    <div class="form-group-relatorio">
                        <label for="data_inicio">Data de Início:</label>
                        <input type="date" id="data_inicio" required>
                    </div>
                    <div class="form-group-relatorio">
                        <label for="data_fim">Data de Fim:</label>
                        <input type="date" id="data_fim" required>
                    </div>
                    <button type="submit" class="btn-primary">Gerar</button>
                </form>
            </div>
            
            <div class="report-card disabled">
                <h3>Relatório com IA</h3>
                <p>Converse com a IA para criar um relatório com insights e análises. (Em breve)</p>
            </div>
        </div>
    </main>
    
    <script>
        const formPersonalizado = document.getElementById('form-personalizado');

        formPersonalizado.addEventListener('submit', function(event) {
            event.preventDefault(); // Impede o envio padrão do formulário

            const dataInicio = document.getElementById('data_inicio').value;
            const dataFim = document.getElementById('data_fim').value;

            if (dataInicio && dataFim) {
                // Constrói a URL para o nosso futuro endpoint da API
                const url = `/relatorios/personalizado?data_inicio=${dataInicio}&data_fim=${dataFim}`;
                
                // Abre o URL numa nova aba para iniciar o download
                window.open(url, '_blank');
            } else {
                alert("Por favor, selecione as duas datas.");
            }
        });
    </script>
</body>
</html>